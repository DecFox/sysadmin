########################################################################
# dom0 tags (showing diversity of our infra, huh)

[dom0:children] # `all` should be equal to `dom0`, so it's here to catch errors
gh
ath
tpo

[gh:children]
mia
hkg
ams

########################################################################
# location tags

[mia]
miacollector.ooni.nu
miatorth.ooni.nu
miaapi.ooni.nu
mia-wcth.ooni.io
mia-ps.ooni.nu
acme-redirect-helper.ooni.io
mia-get.ooni.nu
mia-ps-test.ooni.nu
mia-orchestra-test.ooni.nu

[hkg]
datacollector.infra.ooni.io
hkgmetadb.infra.ooni.io
irc-bouncer.service.ooni.io
jupyter.ooni.io
hkgbouncer.ooni.nu
hkgcollectora.ooni.nu
labs.ooni.io
hkgtorth.ooni.nu
fastpath.ooni.nu

hkg-wcth.ooni.io
hkg-ps.ooni.nu

[ams]
amstorth.ooni.nu
a.http.th.ooni.io
c.echo.th.ooni.io
c.collector.ooni.io
ssdams.infra.ooni.io
slack.openobservatory.org
prometheus.infra.ooni.io
msg.ooni.io
amsexplorer.ooni.nu
amsmatomo.ooni.nu

# XXX rename these to orchestra
notify.proteus.ooni.io
events.proteus.ooni.io # XXX this should be renamed to orchestrate.ooni.io
registry.proteus.ooni.io
db-1.proteus.ooni.io
proteus.ooni.io

run.ooni.io
amsmetadb.ooni.nu
api.ooni.io

ams-ps.ooni.nu

[ath] # Athens. Greek Research and Technology Network S.A
bouncer.infra.ooni.nu # NOT-GH, a.collector.ooni.io a.web-connectivity.th.ooni.io a.collector.ooni.io bouncer.ooni.io

[tpo] # http://www.euserv.de
staticiforme.torproject.org # - art, weasilis have access. (bounce via perdulce.tpo). This requires tpo LDAP account and various other fluff.

[probe_services]
mia-ps.ooni.nu
hkg-ps.ooni.nu
ams-ps.ooni.nu

########################################################################
# PSK (pre-shared key) tags

[psk_amsrepl]
hkgmetadb.infra.ooni.io
amsmetadb.ooni.nu

[psk_hkgmetadb]
datacollector.infra.ooni.io
hkgmetadb.infra.ooni.io
amsmetadb.ooni.nu

[psk_oomsm_beta]
hkgmetadb.infra.ooni.io
# FIXME: drop `oomsm-beta` user

[psk_metadb_amsapi]
hkgmetadb.infra.ooni.io
miaapi.ooni.nu
api.ooni.io

[psk_orchestration]
# FIXME: all in one bin as testing should have access to production! :)
# XXX rename these to orchestra
notify.proteus.ooni.io
events.proteus.ooni.io # XXX this should be renamed to orchestrate.ooni.io
registry.proteus.ooni.io
db-1.proteus.ooni.io
proteus.ooni.io

[psk_orchestra_prod]
mia-ps.ooni.nu
hkg-ps.ooni.nu
ams-ps.ooni.nu

[psk_orchestra_test]
mia-ps-test.ooni.nu
mia-orchestra-test.ooni.nu

[psk_orchestra_db_prod]
# FIXME: untie `psk_orchestration` into something more manageable
db-1.proteus.ooni.io
datacollector.infra.ooni.io

[psk_superset_hkgmetadb]
hkgmetadb.infra.ooni.io

########################################################################
# role tags

[have_fw]
datacollector.infra.ooni.io
hkgmetadb.infra.ooni.io
amsmetadb.ooni.nu
ssdams.infra.ooni.io
hkgtorth.ooni.nu
miatorth.ooni.nu
amstorth.ooni.nu
miaapi.ooni.nu
api.ooni.io
amsexplorer.ooni.nu
fastpath.ooni.nu
amsmatomo.ooni.nu
mia-wcth.ooni.io
hkg-wcth.ooni.io
mia-ps.ooni.nu
hkg-ps.ooni.nu
ams-ps.ooni.nu
acme-redirect-helper.ooni.io
mia-get.ooni.nu
mia-ps-test.ooni.nu
mia-orchestra-test.ooni.nu

[have_nginx]
api.ooni.io
miaapi.ooni.nu
prometheus.infra.ooni.io
amsmatomo.ooni.nu
mia-wcth.ooni.io
hkg-wcth.ooni.io
mia-ps.ooni.nu
hkg-ps.ooni.nu
ams-ps.ooni.nu
acme-redirect-helper.ooni.io
mia-get.ooni.nu
mia-ps-test.ooni.nu
mia-orchestra-test.ooni.nu

[have_tor] # Tor test-helpers
amstorth.ooni.nu
hkgtorth.ooni.nu
miatorth.ooni.nu

[have_collector]
hkgcollectora.ooni.nu
miacollector.ooni.nu
c.collector.ooni.io

mia-ps.ooni.nu
hkg-ps.ooni.nu
ams-ps.ooni.nu


[active_collector]
miacollector.ooni.nu
c.collector.ooni.io

[no_passwd] # hosts in inventory that should NOT have `passwd` applied because of various reasons
irc-bouncer.service.ooni.io       # existing `passwd` that is hard to renumber
staticiforme.torproject.org       # tor LDAP

[no_nodeexp:children]
no_passwd # no passwd => no nodeexp user ;-)

[slackin]
slack.openobservatory.org

########################################################################
# TO DELETE.
# Stopped VMs that should be deleted from GH and DNS after some grace period:
#
# since YYYY-MM-DD # fqdn.example.org # as dead as Lenin, see https://github.com/ooni/sysadmin/issues/NNNN
# since 2018-12-12 # a.echo.th.ooni.io # restore onion key to check if it gets traffic
# since 2018-12-12 # munin.ooni.io # disk idle since 2018-11-25
# since 2018-12-12 # shark.ooni.nu # disk kept since 2018-11-25, idle since 2018-10-16
